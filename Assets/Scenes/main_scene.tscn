[gd_scene load_steps=23 format=3 uid="uid://b0dtao2rsd2q3"]

[ext_resource type="Script" path="res://Sessions/GameSession.cs" id="1_e8p44"]
[ext_resource type="Script" path="res://Entities/Actors/Brains/PlayerBrain.cs" id="2_o1ktv"]
[ext_resource type="Script" path="res://Stages/StageArea.cs" id="2_r16ah"]
[ext_resource type="Script" path="res://Entities/Actors/Heroes/Hero.cs" id="4_eh26b"]
[ext_resource type="Script" path="res://Entities/Actors/Actions/Attacks/AttackFactory.cs" id="5_etl1j"]
[ext_resource type="Material" uid="uid://7uspri3gqlmi" path="res://Assets/Sprites/CanvasItemMaterials/GlowMaterial.tres" id="5_hq12t"]
[ext_resource type="Texture2D" uid="uid://vltvbtw5gbp7" path="res://Assets/Sprites/Hero/Hero.png" id="6_nv06c"]
[ext_resource type="Script" path="res://Entities/Actors/Heroes/HeroVisual.cs" id="7_jvgpe"]
[ext_resource type="Script" path="res://Entities/Enemies/EnemyFactory.cs" id="7_vdk08"]
[ext_resource type="Texture2D" uid="uid://enf3j1jr0egt" path="res://Assets/Sprites/Hero/HeroDeathParticle.png" id="8_1b62m"]
[ext_resource type="Texture2D" uid="uid://dfom8qig3f08k" path="res://Assets/Sprites/Attacks/Sword.png" id="9_8mevo"]
[ext_resource type="Script" path="res://Entities/Actors/Actions/Attacks/Sword.cs" id="9_88g5i"]
[ext_resource type="PackedScene" uid="uid://cloq753iso5nx" path="res://Assets/Prefabs/Enemies/Bouncer.tscn" id="13_wdbrm"]
[ext_resource type="Script" path="res://Entities/Chips/ChipFactory.cs" id="14_gb8n7"]
[ext_resource type="PackedScene" uid="uid://1mxdu035opf5" path="res://Assets/Prefabs/Chip.tscn" id="15_6fqra"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_s0qn5"]
size = Vector2(1920, 1080)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wubgo"]
size = Vector2(2720, 400)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hfy1u"]
size = Vector2(400, 1880)

[sub_resource type="CircleShape2D" id="CircleShape2D_4ljl5"]
radius = 24.0

[sub_resource type="CircleShape2D" id="CircleShape2D_0rifb"]
radius = 36.0

[sub_resource type="Gradient" id="Gradient_h1xn0"]
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="CircleShape2D" id="CircleShape2D_2frlu"]
radius = 96.0

[node name="MainScene" type="Node2D"]

[node name="GameSession" type="Node" parent="." node_paths=PackedStringArray("_playerBrain", "_playerHero", "_stageArea", "_enemyFactory", "_attackFactory")]
script = ExtResource("1_e8p44")
_playerBrain = NodePath("PlayerBrain")
_playerHero = NodePath("Hero")
_stageArea = NodePath("Stage")
_enemyFactory = NodePath("Enemies")
_attackFactory = NodePath("Attacks")

[node name="Stage" type="Area2D" parent="GameSession"]
script = ExtResource("2_r16ah")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameSession/Stage"]
position = Vector2(960, 540)
shape = SubResource("RectangleShape2D_s0qn5")

[node name="Wall" type="StaticBody2D" parent="GameSession"]
collision_layer = 2

[node name="Top" type="CollisionShape2D" parent="GameSession/Wall"]
position = Vector2(960, -200)
shape = SubResource("RectangleShape2D_wubgo")

[node name="Down" type="CollisionShape2D" parent="GameSession/Wall"]
position = Vector2(960, 1280)
shape = SubResource("RectangleShape2D_wubgo")

[node name="Left" type="CollisionShape2D" parent="GameSession/Wall"]
position = Vector2(-200, 540)
shape = SubResource("RectangleShape2D_hfy1u")

[node name="Right" type="CollisionShape2D" parent="GameSession/Wall"]
position = Vector2(2120, 540)
shape = SubResource("RectangleShape2D_hfy1u")

[node name="PlayerBrain" type="Node" parent="GameSession"]
script = ExtResource("2_o1ktv")

[node name="Hero" type="RigidBody2D" parent="GameSession" node_paths=PackedStringArray("_visual")]
position = Vector2(960, 540)
collision_layer = 4
collision_mask = 4
gravity_scale = 2.66454e-15
lock_rotation = true
script = ExtResource("4_eh26b")
_visual = NodePath("Visual")

[node name="Visual" type="Sprite2D" parent="GameSession/Hero" node_paths=PackedStringArray("_deathParticle")]
material = ExtResource("5_hq12t")
texture = ExtResource("6_nv06c")
script = ExtResource("7_jvgpe")
_deathParticle = NodePath("../DeathParticle")
_damageColor0 = Color(0.2, 0.74902, 1, 1)
_damageColor1 = Color(0, 0.345098, 0.501961, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameSession/Hero"]
shape = SubResource("CircleShape2D_4ljl5")

[node name="TouchArea" type="Area2D" parent="GameSession/Hero"]
collision_layer = 0
collision_mask = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameSession/Hero/TouchArea"]
shape = SubResource("CircleShape2D_0rifb")

[node name="DeathParticle" type="CPUParticles2D" parent="GameSession/Hero"]
material = ExtResource("5_hq12t")
position = Vector2(2.08165e-12, 2.08165e-12)
emitting = false
amount = 32
lifetime = 4.0
one_shot = true
explosiveness = 1.0
randomness = 1.0
texture = ExtResource("8_1b62m")
spread = 180.0
gravity = Vector2(2.08165e-12, 2.08165e-12)
initial_velocity_min = 80.0
initial_velocity_max = 320.0
damping_max = 20.0
scale_amount_min = 0.2
color_ramp = SubResource("Gradient_h1xn0")

[node name="Attacks" type="Node" parent="GameSession" node_paths=PackedStringArray("_sword")]
script = ExtResource("5_etl1j")
_sword = NodePath("Sword")

[node name="Sword" type="Area2D" parent="GameSession/Attacks" node_paths=PackedStringArray("_visual")]
material = ExtResource("5_hq12t")
script = ExtResource("9_88g5i")
_visual = NodePath("Sprite2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameSession/Attacks/Sword"]
shape = SubResource("CircleShape2D_2frlu")

[node name="Sprite2D" type="Sprite2D" parent="GameSession/Attacks/Sword"]
visible = false
texture = ExtResource("9_8mevo")

[node name="Enemies" type="Node" parent="GameSession" node_paths=PackedStringArray("_stageArea", "_chipFactory")]
script = ExtResource("7_vdk08")
_enemyPacks = Array[PackedScene]([ExtResource("13_wdbrm")])
_stageArea = NodePath("../Stage")
_chipFactory = NodePath("../Chips")

[node name="Chips" type="Node" parent="GameSession"]
script = ExtResource("14_gb8n7")
_chipPack = ExtResource("15_6fqra")

[connection signal="body_entered" from="GameSession/Hero/TouchArea" to="GameSession/Hero" method="OnAreaEntered"]

[gd_scene load_steps=19 format=3 uid="uid://bv75pxtmkco6h"]

[ext_resource type="Script" path="res://InGame/GameSession.cs" id="1_3vmkm"]
[ext_resource type="AudioStream" uid="uid://co0nivgvat2o1" path="res://Assets/Audios/Musics/Karashi.ogg" id="2_4rfsh"]
[ext_resource type="Resource" uid="uid://d0bi8epko3ufw" path="res://Assets/PowerUps/PowerUpService.tres" id="2_qh4ok"]
[ext_resource type="Script" path="res://InGame/Entities/Actors/Brains/PlayerBrain.cs" id="3_hejmq"]
[ext_resource type="Material" uid="uid://7uspri3gqlmi" path="res://Assets/Sprites/CanvasItemMaterials/GlowMaterial.tres" id="4_ei801"]
[ext_resource type="PackedScene" uid="uid://dq3qa3kw50pld" path="res://Assets/Prefabs/InGame/hero.tscn" id="4_x8apq"]
[ext_resource type="Resource" uid="uid://cb55lnpdxxgfn" path="res://Assets/Prefabs/Enemies/tank_pack.tres" id="7_qkt77"]
[ext_resource type="Script" path="res://InGame/StageArea.cs" id="8_ii0rj"]
[ext_resource type="Script" path="res://InGame/Entities/Chips/ChipFactory.cs" id="9_ubuin"]
[ext_resource type="Script" path="res://InGame/Entities/Enemies/EnemyFactory.cs" id="9_w7yn5"]
[ext_resource type="PackedScene" uid="uid://dd43uh6mssi6r" path="res://Assets/Prefabs/chip.tscn" id="12_simin"]
[ext_resource type="Resource" uid="uid://mj72ucifsljv" path="res://Assets/Prefabs/Enemies/bouncer_pack.tres" id="16_vprkf"]
[ext_resource type="Texture2D" uid="uid://bl612861u0flk" path="res://Assets/Sprites/Stage/BackParticle.png" id="17_6nw2x"]
[ext_resource type="PackedScene" uid="uid://c1l5sc6rxl0pu" path="res://Assets/Prefabs/InGame/level_up_ui.tscn" id="20_i10d6"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pvc1j"]
size = Vector2(1920, 1080)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0iyrw"]
size = Vector2(3120, 600)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qm5pu"]
size = Vector2(600, 2280)

[sub_resource type="Gradient" id="Gradient_ju6ya"]
offsets = PackedFloat32Array(0, 0.491686, 1)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0)

[node name="GameSession" type="Node" node_paths=PackedStringArray("_playerBrain", "_playerHero", "_stageArea", "_chipFactory", "_enemyFactory", "_powerUpUi", "_projectileRoot")]
process_mode = 1
script = ExtResource("1_3vmkm")
_gameMusic = ExtResource("2_4rfsh")
_playerBrain = NodePath("PlayerBrain")
_playerHero = NodePath("Hero")
_stageArea = NodePath("StageArea")
_chipFactory = NodePath("Chips")
_enemyFactory = NodePath("Enemies")
_powerUpUi = NodePath("LevelUpUI")
_projectileRoot = NodePath("Projectiles")
_powerUpService = ExtResource("2_qh4ok")

[node name="StageArea" type="Area2D" parent="."]
visible = false
script = ExtResource("8_ii0rj")

[node name="CollisionShape2D" type="CollisionShape2D" parent="StageArea"]
position = Vector2(960, 540)
shape = SubResource("RectangleShape2D_pvc1j")

[node name="Wall" type="StaticBody2D" parent="."]
visible = false
position = Vector2(960, 540)

[node name="Up" type="CollisionShape2D" parent="Wall"]
position = Vector2(0, -840)
shape = SubResource("RectangleShape2D_0iyrw")

[node name="Down" type="CollisionShape2D" parent="Wall"]
position = Vector2(0, 840)
shape = SubResource("RectangleShape2D_0iyrw")

[node name="Left" type="CollisionShape2D" parent="Wall"]
position = Vector2(-1260, 0)
shape = SubResource("RectangleShape2D_qm5pu")

[node name="Right" type="CollisionShape2D" parent="Wall"]
position = Vector2(1260, 0)
shape = SubResource("RectangleShape2D_qm5pu")

[node name="PlayerBrain" type="Node" parent="."]
script = ExtResource("3_hejmq")

[node name="Hero" parent="." instance=ExtResource("4_x8apq")]

[node name="Enemies" type="Node" parent="." node_paths=PackedStringArray("_stageArea", "_chipFactory")]
script = ExtResource("9_w7yn5")
_enemyPacks = Array[Resource]([ExtResource("16_vprkf"), ExtResource("7_qkt77")])
_stageArea = NodePath("../StageArea")
_chipFactory = NodePath("../Chips")

[node name="Chips" type="Node" parent="."]
script = ExtResource("9_ubuin")
_chipPack = ExtResource("12_simin")

[node name="Projectiles" type="Node2D" parent="."]

[node name="StageBackParticles" type="CPUParticles2D" parent="."]
material = ExtResource("4_ei801")
position = Vector2(960, 540)
amount = 32
lifetime = 5.0
lifetime_randomness = 0.5
texture = ExtResource("17_6nw2x")
emission_shape = 3
emission_rect_extents = Vector2(960, 540)
direction = Vector2(2.08165e-12, 2.08165e-12)
spread = 180.0
gravity = Vector2(2.08165e-12, 2.08165e-12)
initial_velocity_max = 16.0
color_ramp = SubResource("Gradient_ju6ya")

[node name="LevelUpUI" parent="." instance=ExtResource("20_i10d6")]
